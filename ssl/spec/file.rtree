Specification([Imports(["posix-file","io"]),Strategies([SDef("open-stream",[],Seq(Match(Op("",[Wld,Wld])),LChoice(Seq(Call(SVar("Fst"),[]),Call(SVar("stdio-stream"),[])),LChoice(Seq(Call(SVar(""),[Match(Op("Path",[RootApp(Id)])),Id]),Call(SVar("fopen"),[])),Seq(Call(SVar(""),[Call(SVar("is-string"),[]),Id]),Call(SVar("fopen"),[])))))),SDef("stdio-stream",[],Seq(Match(Op("stdin",[])),Call(SVar("stdin-stream"),[]))),SDef("stdio-stream",[],Seq(Match(Op("stdout",[])),Call(SVar("stdout-stream"),[]))),SDef("stdio-stream",[],Seq(Match(Op("stderr",[])),Call(SVar("stderr-stream"),[])))]),Strategies([SDef("file-exists",[],BA(Call(SVar("access"),[]),Op("",[RootApp(Id),Op("Cons",[Op("F_OK",[]),Op("Nil",[])])])))]),Strategies([SDef("find-in-path",[],Seq(Match(Op("",[Var("file"),RootApp(Id)])),Call(SVar("fetch-elem"),[BA(Seq(Call(SVar("concat-strings"),[]),Call(SVar("file-exists"),[])),Op("Cons",[RootApp(Id),Op("Cons",[Str("/"),Op("Cons",[Var("file"),Op("Nil",[])])])]))]))),SDef("find-in-path",[DefaultVarDec("mkpath")],LChoice(Call(SVar("file-exists"),[]),LChoice(Seq(Call(SVar("split"),[Id,Call(SVar("mkpath"),[])]),Call(SVar("find-in-path"),[])),BA(Call(SVar("fatal-error"),[]),Op("Cons",[Str("no such file: "),Op("Cons",[RootApp(Id),Op("Nil",[])])]))))),SDef("find-file",[DefaultVarDec("mkpath"),DefaultVarDec("ext")],Seq(Call(SVar("guarantee-extension"),[Call(SVar("ext"),[])]),Call(SVar("find-in-path"),[Call(SVar("mkpath"),[])]))),SDef("find-file",[DefaultVarDec("ext")],Seq(Call(SVar(""),[Call(SVar("guarantee-extension"),[Call(SVar("ext"),[])]),Id]),Call(SVar("find-in-path"),[])))])])

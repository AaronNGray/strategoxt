Specification([Imports(["posix-process","posix-signal"]),Strategies([SDef("fork",[DefaultVarDec("child")],Call(SVar("fork"),[Call(SVar("child"),[]),Id])),SDef("fork",[DefaultVarDec("child"),DefaultVarDec("parent")],Seq(Match(Var("t")),Seq(Call(SVar("fork"),[]),Seq(Match(Var("pid")),LChoice(Seq(Match(Int(0)),BA(Call(SVar("child"),[]),Var("t"))),BA(Call(SVar("parent"),[]),Op("",[Var("pid"),Var("t")]))))))),SDef("fork-and-wait",[DefaultVarDec("child")],Call(SVar("fork"),[Call(SVar("child"),[]),Seq(Match(Op("",[RootApp(Call(SVar("waitpid"),[])),Var("t")])),Seq(Call(SVar("warn-ifsignaled"),[]),Seq(Match(Op("WaitStatus",[Int(0),Wld,Wld])),Build(Var("t")))))]))]),Strategies([SDef("call",[],Seq(Match(Op("",[Var("prog"),Var("args")])),Call(SVar("fork-and-wait"),[BA(Call(SVar("execvp"),[]),Op("",[Var("prog"),Var("args")]))]))),SDef("call",[DefaultVarDec("init-child")],Seq(Match(Op("",[Var("prog"),Var("args")])),Call(SVar("fork-and-wait"),[Seq(Call(SVar("init-child"),[]),BA(Call(SVar("execvp"),[]),Op("",[Var("prog"),Var("args")])))]))),SDef("call-noisy",[],Seq(Match(Op("",[Var("prog"),Var("args")])),Call(SVar("fork-and-wait"),[BA(Seq(Call(SVar("debug"),[]),Call(SVar("execvp"),[])),Op("",[Var("prog"),Var("args")]))])))]),Strategies([SDef("exited",[],Seq(Match(Op("WaitStatus",[Var("s"),Wld,Wld])),Seq(Where(BA(Not(Call(SVar("eq"),[])),Op("",[Var("s"),Int(-1)]))),Call(SVar("if-verbose3"),[Call(SVar("debug"),[Build(Str("the process exited: "))])])))),SDef("signaled",[],Seq(Match(Op("WaitStatus",[Wld,Var("s"),Wld])),Seq(Where(BA(Not(Call(SVar("eq"),[])),Op("",[Var("s"),Int(-1)]))),Call(SVar("if-verbose2"),[Call(SVar("debug"),[Build(Str("the process was signaled"))])])))),SDef("stopped",[],Seq(Match(Op("WaitStatus",[Wld,Wld,Var("s")])),Seq(Where(BA(Not(Call(SVar("eq"),[])),Op("",[Var("s"),Int(-1)]))),Call(SVar("if-verbose3"),[Call(SVar("debug"),[Build(Str("the process stopped"))])])))),SDef("warn-ifsignaled",[],Where(Call(SVar("try"),[Seq(Match(Op("WaitStatus",[Wld,RootApp(Id),Wld])),Seq(Not(Match(Int(-1))),Seq(Call(SVar("signal-from-number"),[]),Seq(Call(SVar("signal-to-descr"),[]),BA(Call(SVar("printnl"),[]),Op("",[Var("stderr"),Op("Cons",[Str("** WARNING -- process signaled: "),Op("Cons",[RootApp(Id),Op("Nil",[])])])]))))))])))])])

Specification([Imports(["list-set","unification","term"]),Strategies([SDef("share",[DefaultVarDec("mkvar"),DefaultVarDec("always"),DefaultVarDec("mklet")],Seq(Call(SVar("graph"),[Call(SVar("mkvar"),[])]),Call(SVar("inline-graph"),[Call(SVar("always"),[]),Call(SVar("mklet"),[])])))]),Strategies([SDef("edge",[DefaultVarDec("mkvar")],Call(SVar("split"),[Seq(Call(SVar("address"),[]),Call(SVar("mkvar"),[])),All(Seq(Call(SVar("address"),[]),Call(SVar("mkvar"),[])))])),SDef("list-edge",[DefaultVarDec("mkvar")],Call(SVar("split"),[Seq(Call(SVar("address"),[]),Call(SVar("mkvar"),[])),Call(SVar("map"),[Seq(Call(SVar("address"),[]),Call(SVar("mkvar"),[]))])])),SDef("graph",[DefaultVarDec("mkvar")],Rec("x",LChoice(Seq(Call(SVar("is-list"),[]),Seq(Call(SVar("split"),[Call(SVar("list-edge"),[Call(SVar("mkvar"),[])]),Seq(Call(SVar("map"),[Call(SVar("x"),[])]),Call(SVar("unions"),[]))]),Call(SVar("MkCons"),[]))),Seq(Call(SVar("split"),[Call(SVar("edge"),[Call(SVar("mkvar"),[])]),Seq(LRule(Rule(Explode(Wld,Var("xs")),Var("xs"),Id)),Seq(Call(SVar("map"),[Call(SVar("x"),[])]),Call(SVar("unions"),[])))]),Call(SVar("MkCons"),[])))))]),Signature([Constructors([OpDecl("GraphLet",FunType([ConstType(Op("List",[Op("Product",[Op("Cons",[Var("Int"),Op("Cons",[Var("Term"),Op("Nil",[])])])])])),ConstType(Var("Term"))],ConstType(Var("Term"))))])]),Strategies([SDef("inline-graph",[DefaultVarDec("always"),DefaultVarDec("mklet")],Seq(LRule(Rule(Op("Cons",[Op("",[Var("a"),Var("t")]),Var("graph")]),Op("GraphLet",[Var("graph"),Var("t")]),Id)),Seq(Call(SVar("repeat"),[LChoice(Seq(Call(SVar("inline"),[]),Choice(Call(SVar("GraphLet"),[Call(SVar("Cons"),[Call(SVar(""),[Id,Call(SVar("always"),[])]),Id]),Id]),Call(SVar("dead"),[]))),LChoice(Call(SVar("dead"),[]),Call(SVar("dont-inline"),[Call(SVar("mklet"),[])])))]),LRule(Rule(Op("GraphLet",[Op("Nil",[]),Var("t")]),Var("t"),Id)))))]),Rules([RDef("inline",[],Rule(Op("GraphLet",[Op("Cons",[Op("",[Var("a"),Var("skel")]),Var("graph")]),Con(Var("t"),Var("a"),Call(SVar("oncetd"),[]))]),Op("GraphLet",[Op("Cons",[Op("",[Var("a"),Var("skel")]),Var("graph")]),Con(Var("t"),Var("skel"),Call(SVar("oncetd"),[]))]),Id)),RDef("dead",[],Rule(Op("GraphLet",[Op("Cons",[Op("",[Var("a"),Var("skel")]),Var("graph")]),Var("t")]),Op("GraphLet",[Var("graph"),Var("t")]),BA(Not(Call(SVar("is-subterm"),[])),Op("",[Var("a"),Var("t")])))),RDef("dont-inline",[DefaultVarDec("mklet")],Rule(Op("GraphLet",[Op("Cons",[Op("",[Var("a"),Var("skel")]),Var("graph")]),Var("t")]),Op("GraphLet",[Var("graph"),App(Call(SVar("mklet"),[]),Op("",[Var("a"),Var("skel"),Var("t")]))]),Id))])])
Specification([Imports(["lib","apply"]),Signature([Constructors([OpDecl("LNil",ConstType(Op("LList",[Var("a")]))),OpDecl("LCons",FunType([ConstType(Var("a")),ConstType(Var("Layout")),ConstType(Op("LList",[Var("a")]))],ConstType(Op("LList",[Var("a")]))))])]),Overlays([Overlay("LCons",["hd","tl"],Op("LCons",[Var("hd"),BuildDefault(Var("UL")),Var("tl")])),Overlay("lsingle",["s"],Op("LCons",[Var("s"),BuildDefault(Var("UL")),Var("Nil")]))]),Rules([RDef("ll2singleton",[],Rule(Op("LCons",[Var("x"),Wld,Op("Nil",[])]),Op("Cons",[Var("x"),Op("Nil",[])]),Id)),RDef("lRev",[],Rule(Op("",[Op("LCons",[Var("x"),Var("xs")]),Var("ys")]),Op("",[Var("xs"),Op("LCons",[Var("x"),Var("ys")])]),Id))]),Strategies([SDef("layuniq",[],Call(SVar("layuniq"),[Id])),SDef("layuniq",[DefaultVarDec("s")],Seq(Match(Op("",[Var("x"),Var("xs")])),Seq(Build(Var("xs")),Call(SVar("lfilter"),[Where(Seq(Call(SVar("split"),[Id,Build(Var("x"))]),Not(Seq(Call(SVar("layeq"),[]),Call(SVar("s"),[])))))])))),SDef("lunzip",[DefaultVarDec("s")],Rec("r",Choice(Scope(["a","b","as","bs"],LRule(Rule(Op("LCons",[Var("x"),Var("l"),Var("xs")]),Op("",[Op("LCons",[Var("a"),Var("l"),Var("as")]),Op("LCons",[Var("b"),Var("l"),Var("bs")])]),Seq(AM(BA(Call(SVar("s"),[]),Var("x")),Op("",[Var("a"),Var("b")])),AM(BA(Call(SVar("r"),[]),Var("xs")),Op("",[Var("as"),Var("bs")])))))),LRule(Rule(Var("Nil"),Op("",[Var("Nil"),Var("Nil")]),Id))))),SDef("lzip",[DefaultVarDec("s")],Rec("r",Choice(LRule(Rule(Op("",[Op("LCons",[Var("a"),Var("l"),Var("as")]),Op("LCons",[Var("b"),Var("l"),Var("bs")])]),Op("LCons",[App(Call(SVar("s"),[]),Op("",[Var("a"),Var("b")])),Var("l"),App(Call(SVar("r"),[]),Op("",[Var("as"),Var("bs")]))]),Id)),LRule(Rule(Op("",[Var("Nil"),Var("Nil")]),Var("Nil"),Id))))),SDef("extract-common-head",[],Rec("r",LChoice(LRule(Rule(Op("",[Op("Nil",[]),Var("g")]),Op("",[Op("Nil",[]),Var("g"),Op("Nil",[])]),Id)),LChoice(LRule(Rule(Op("",[Var("f"),Op("Nil",[])]),Op("",[Var("f"),Op("Nil",[]),Op("Nil",[])]),Id)),LChoice(Scope(["fs'","gs'","hs"],LRule(Rule(Op("",[Op("LCons",[Var("h"),Var("fs")]),Op("LCons",[Var("h"),Var("gs")])]),Op("",[Var("fs'"),Var("gs'"),Op("LCons",[Var("h"),Var("hs")])]),AM(BA(Call(SVar("r"),[]),Op("",[Var("fs"),Var("gs")])),Op("",[Var("fs'"),Var("gs'"),Var("hs")]))))),LRule(Rule(Op("",[Var("fs"),Var("gs")]),Op("",[Var("fs"),Var("gs"),Op("Nil",[])]),Id))))))),SDef("extract-common-heads",[],Rec("r",LChoice(LRule(Rule(Var("a"),Op("",[Var("a"),Op("Nil",[])]),BA(Call(SVar("lfetch"),[Call(SVar("Nil"),[])]),Var("a")))),LChoice(Scope(["x"],Seq(Call(SVar("LCons"),[Call(SVar("LCons"),[Match(Var("x")),Id]),Id]),Seq(Call(SVar("lmap"),[LRule(Rule(Op("LCons",[Var("y"),Var("xs")]),Var("xs"),BA(Call(SVar("layeq"),[]),Op("",[Var("x"),Var("y")]))))]),Seq(Call(SVar("r"),[]),LRule(Rule(Op("",[Var("xs'"),Var("x's")]),Op("",[Var("xs'"),Op("LCons",[Var("x"),Var("x's")])]),Id)))))),LRule(Rule(Var("xs"),Op("",[Var("xs"),Op("Nil",[])]),Id)))))),SDef("extract-common",[],Seq(Call(SVar("extract-common-head"),[]),Seq(LRule(Rule(Op("",[Var("a"),Var("b"),Var("c")]),Op("",[App(Call(SVar("lreverse"),[]),Var("a")),App(Call(SVar("lreverse"),[]),Var("b"))]),AM(Build(Var("c")),Var("hd")))),Seq(Call(SVar("extract-common-head"),[]),LRule(Rule(Op("",[Var("a"),Var("b"),Var("c")]),Op("",[App(Call(SVar("lreverse"),[]),Var("a")),App(Call(SVar("lreverse"),[]),Var("b")),Var("hd"),App(Call(SVar("lreverse"),[]),Var("c"))]),Id)))))),SDef("extract-commons",[],Seq(Call(SVar("extract-common-heads"),[]),Seq(LRule(Rule(Op("",[Var("a"),Var("b")]),App(Call(SVar("lmap"),[Call(SVar("lreverse"),[])]),Var("a")),AM(Build(Var("b")),Var("hd")))),Seq(Call(SVar("extract-common-heads"),[]),LRule(Rule(Op("",[Var("a"),Var("b")]),Op("",[App(Call(SVar("lmap"),[Call(SVar("lreverse"),[])]),Var("a")),Var("hd"),App(Call(SVar("lreverse"),[]),Var("b"))]),Id)))))),SDef("lreverse",[],Seq(Call(SVar("RevInit"),[]),Seq(Call(SVar("repeat"),[Call(SVar("lRev"),[])]),Call(SVar("RevExit"),[])))),SDef("set-last-layout",[DefaultVarDec("s")],Rec("r",LChoice(Call(SVar("LCons"),[Id,Call(SVar("s"),[]),Call(SVar("Nil"),[])]),Call(SVar("LCons"),[Id,Call(SVar("r"),[])])))),SDef("lmap",[DefaultVarDec("s")],Rec("r",Choice(Call(SVar("LCons"),[Call(SVar("s"),[]),Call(SVar("r"),[])]),Call(SVar("Nil"),[])))),SDef("lmap''",[DefaultVarDec("s")],Rec("r",LChoice(Call(SVar("Nil"),[]),Call(SVar("apply"),[Call(SVar("s"),[]),Call(SVar("LCons"),[Id,Call(SVar("r"),[])])])))),SDef("lmap'",[DefaultVarDec("s")],Rec("r",Choice(Scope(["x'","l'"],LRule(Rule(Op("LCons",[Var("x"),Var("l"),Var("xs")]),Op("LCons",[Var("x'"),Var("l'"),App(Call(SVar("r"),[]),Var("xs"))]),AM(BA(Call(SVar("s"),[]),Op("",[Var("x"),Var("l")])),Op("",[Var("x'"),Var("l'")]))))),Call(SVar("Nil"),[])))),SDef("lthread-map",[DefaultVarDec("s")],Rec("x",Choice(Call(SVar(Mod("LCons","T")),[Call(SVar("s"),[]),Id,Call(SVar("x"),[])]),Call(SVar(Mod("Nil","T")),[])))),SDef("lfilter",[DefaultVarDec("s")],Rec("x",Choice(Call(SVar("Nil"),[]),LChoice(Call(SVar("LCons"),[Call(SVar("s"),[]),Call(SVar("x"),[])]),Seq(Call(SVar("lTl"),[]),Call(SVar("x"),[])))))),SDef("lfilter-many",[DefaultVarDec("s")],Rec("r",LChoice(Call(SVar("LCons"),[Call(SVar("s"),[]),Call(SVar("r"),[])]),Seq(Call(SVar("LCons"),[Not(Call(SVar("s"),[])),AM(Call(SVar("lfilter"),[Call(SVar("s"),[])]),Var("f"))]),Build(Var("f")))))),SDef("lfetch",[DefaultVarDec("s")],Rec("x",LChoice(Call(SVar("LCons"),[Call(SVar("s"),[]),Id]),Call(SVar("LCons"),[Id,Call(SVar("x"),[])])))),SDef("llength",[],Rec("x",Choice(Seq(Call(SVar("Nil"),[]),Build(Int(0))),Seq(Call(SVar("lTl"),[]),Seq(Call(SVar("x"),[]),LRule(Rule(Var("n"),App(Call(SVar("add"),[]),Op("",[Var("n"),Int(1)])),Id))))))),SDef("lconcat",[],Rec("x",Choice(Call(SVar("Nil"),[]),LRule(Rule(Op("LCons",[Var("l"),Var("ls")]),App(Call(SVar("at-end"),[BA(Call(SVar("x"),[]),Var("ls"))]),Var("l")),Id))))),SDef("lconcat'",[],Rec("x",Choice(Call(SVar("Nil"),[]),LRule(Rule(Op("Cons",[Var("l"),Var("ls")]),App(Call(SVar("at-l-end"),[BA(Call(SVar("x"),[]),Var("ls"))]),Var("l")),Id))))),SDef("at-l-end",[DefaultVarDec("s")],Rec("x",Choice(Call(SVar("LCons"),[Id,Call(SVar("x"),[])]),Seq(Call(SVar("Nil"),[]),Call(SVar("s"),[]))))),SDef("at-l-last",[DefaultVarDec("s")],Rec("x",LChoice(Call(SVar("LCons"),[Call(SVar("s"),[]),Call(SVar("Nil"),[])]),Call(SVar("LCons"),[Id,Call(SVar("x"),[])])))),SDef("lconcat''",[],Rec("x",Choice(Call(SVar("Nil"),[]),LRule(Rule(Op("LCons",[Var("l"),Var("l1"),Var("ls")]),App(Call(SVar("at-l-end'"),[BA(Call(SVar("x"),[]),Var("ls"))]),Op("",[Var("l"),Var("l1")])),Id))))),SDef("at-l-end'",[DefaultVarDec("s")],Seq(Match(Op("",[Var("l"),Var("l1")])),Seq(Build(Var("l")),Rec("x",LChoice(Call(SVar("LCons"),[Id,LRule(Rule(Var("l2"),App(Call(SVar("layconc"),[]),Op("",[Var("l2"),Var("l1")])),Id)),Seq(Match(Op("Nil",[])),Call(SVar("s"),[]))]),Call(SVar("LCons"),[Id,Call(SVar("x"),[])])))))),SDef("ConstoLCons",[],Rec("x",Choice(Call(SVar("Nil"),[]),LRule(Rule(Op("Cons",[Var("l"),Var("ls")]),Op("LCons",[Var("l"),App(Call(SVar("x"),[]),Var("ls"))]),Id))))),SDef("LConstoCons",[],Rec("x",Choice(Call(SVar("Nil"),[]),LRule(Rule(Op("LCons",[Var("y"),Var("ys")]),Op("Cons",[Var("y"),App(Call(SVar("x"),[]),Var("ys"))]),Id))))),SDef("lLast",[],Rec("r",Choice(LRule(Rule(Op("LCons",[Var("x"),Var("Nil")]),Var("x"),Id)),LRule(Rule(Op("LCons",[Wld,Var("xs")]),App(Call(SVar("r"),[]),Var("xs")),Id))))),SDef("lInit",[],Rec("r",Choice(LRule(Rule(Op("LCons",[Var("x"),Var("Nil")]),Var("Nil"),Id)),Call(SVar("LCons"),[Id,Call(SVar("r"),[])]))))]),Rules([RDef("lTl",[],Rule(Op("LCons",[Var("x"),Var("xs")]),Var("xs"),Id)),RDef("lHd",[],Rule(Op("LCons",[Var("x"),Var("xs")]),Var("x"),Id)),RDef("lconc",[],Rule(Op("",[Var("l1"),Var("l2")]),App(Call(SVar("at-l-end"),[Build(Var("l2"))]),Var("l1")),Id))])])
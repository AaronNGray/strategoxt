Specification([Imports(["sunit","exec"]),Strategies([SDef("main",[],Call(SVar("test-suite"),[Build(Str("exec-test")),Seq(Call(SVar("test1"),[]),Call(SVar("test2"),[]))])),SDef("test1",[],Seq(Where(Seq(BA(Call(SVar("WriteToTextFile"),[]),Op("",[Str("exec-test1-data1.trm"),Str("abc")])),BA(Call(SVar("WriteToTextFile"),[]),Op("",[Str("exec-test1-data2.trm"),Str("def")])))),Call(SVar("apply-and-check"),[Build(Str("test1")),Call(SVar("copy-file"),[Id,Build(Str("exec-test1-data2")),Id]),Build(Op("",[Str("exec-test1-data1"),Str(".trm")])),Seq(Match(Op("",[Str("exec-test1-data2"),Str(".trm")])),Where(AM(BA(Call(SVar("ReadFromFile"),[]),Str("exec-test1-data2.trm")),Str("abc"))))]))),RDef("cat",[],Rule(Op("",[Var("filein"),Var("fileout")]),Var("fileout"),BA(Call(SVar("call"),[Seq(BA(Call(SVar("redirect-stdin-from-file"),[]),Var("filein")),BA(Call(SVar("redirect-stdout-to-file"),[]),Var("fileout")))]),Op("",[Str("cat"),Op("Nil",[])])))),SDef("test2",[],Seq(Where(Seq(BA(Call(SVar("WriteToTextFile"),[]),Op("",[Str("exec-test2-data1.trm"),Str("abc")])),BA(Call(SVar("WriteToTextFile"),[]),Op("",[Str("exec-test2-data2.trm"),Str("def")])))),Seq(Call(SVar("apply-and-check"),[Build(Str("test2a")),Call(SVar("cat"),[]),Build(Op("",[Str("exec-test2-data1.trm"),Str("exec-test2-data3.trm")])),Seq(Match(Str("exec-test2-data3.trm")),Where(BA(Call(SVar("call"),[]),Op("",[Str("diff"),Op("Cons",[Str("exec-test2-data1.trm"),Op("Cons",[Str("exec-test2-data3.trm"),Op("Nil",[])])])]))))]),Call(SVar("apply-and-check"),[Build(Str("test2b")),Call(SVar("cat"),[]),Build(Op("",[Str("exec-test2-data2.trm"),Str("exec-test2-data4.trm")])),Seq(Match(Str("exec-test2-data4.trm")),Where(Not(BA(Call(SVar("call"),[]),Op("",[Str("diff"),Op("Cons",[Str("-q"),Op("Cons",[Str("exec-test2-data1.trm"),Op("Cons",[Str("exec-test2-data4.trm"),Op("Nil",[])])])])])))))]))))])])

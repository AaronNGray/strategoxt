Specification([Imports(["string","pack-graph"]),Rules([RDef("PackInit",[],Rule(Var("root"),Op("",[Var("root"),Op("",[]),Op("Nil",[])]),Id))]),Strategies([SDef("pack",[DefaultVarDec("parser"),DefaultVarDec("imp")],Seq(Call(SVar("PackInit"),[]),Call(SVar("graph-nodes"),[Seq(Call(SVar("Fst"),[]),Call(SVar("parser"),[])),Call(SVar("get-imports"),[Call(SVar("imp"),[])]),LRule(Rule(Op("",[Var("n"),Var("x"),Var("xs")]),Op("Cons",[Var("x"),Var("xs")]),Id))]))),SDef("get-imports",[DefaultVarDec("imp")],Seq(Call(SVar("collect"),[Call(SVar("imp"),[])]),Call(SVar("concat"),[])))]),Rules([RDef("WriteMod",[DefaultVarDec("getname"),DefaultVarDec("write"),DefaultVarDec("ext")],Rule(Var("mod"),App(Call(SVar("write"),[]),Op("",[App(Call(SVar("add-extension"),[]),Op("",[App(Call(SVar("getname"),[]),Var("mod")),App(Call(SVar("ext"),[]),Op("",[]))])),Var("mod")])),Id))]),Strategies([SDef("unpack",[DefaultVarDec("wrapper"),DefaultVarDec("getname"),DefaultVarDec("ext")],Call(SVar("wrapper"),[Call(SVar("WriteMod"),[Call(SVar("getname"),[]),Call(SVar("WriteToTextFile"),[]),Call(SVar("ext"),[])])]))]),Strategies([SDef("flatten",[DefaultVarDec("imp"),DefaultVarDec("nameeq"),DefaultVarDec("getcontent")],Seq(LRule(Rule(Op("",[Var("root"),Var("mods")]),Op("",[Var("root"),Var("mods"),Op("Nil",[])]),Id)),Call(SVar("graph-nodes"),[Call(SVar("lookup"),[Call(SVar("nameeq"),[])]),Call(SVar("get-imports"),[Call(SVar("imp"),[])]),LRule(Rule(Op("",[Wld,Var("x"),Var("y")]),App(Call(SVar("conc"),[]),Op("",[App(Call(SVar("getcontent"),[]),Var("x")),Var("y")])),Id))])))])])

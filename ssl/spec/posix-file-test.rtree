Specification([Imports(["sunit","posix-file"]),Strategies([SDef("main",[],Call(SVar("test-suite"),[Build(Str("posix-file-test")),Call(SVar("fileno-tests"),[])])),SDef("fileno-tests",[],Seq(Call(SVar("apply-test"),[Build(Str("fileno on stdin  -- 1")),Call(SVar("fileno"),[]),Build(Op("stdin",[])),Build(Int(0))]),Seq(Call(SVar("apply-test"),[Build(Str("fileno on stdin  -- 2")),Call(SVar("fileno"),[]),Build(Op("stdin",[])),Call(SVar("STDIN_FILENO"),[])]),Seq(Call(SVar("apply-test"),[Build(Str("fileno on stdout -- 1")),Call(SVar("fileno"),[]),Build(Op("stdout",[])),Build(Int(1))]),Seq(Call(SVar("apply-test"),[Build(Str("fileno on stdout -- 2")),Call(SVar("fileno"),[]),Build(Op("stdout",[])),Call(SVar("STDOUT_FILENO"),[])]),Seq(Call(SVar("apply-test"),[Build(Str("fileno on stderr -- 1")),Call(SVar("fileno"),[]),Build(Op("stderr",[])),Build(Int(2))]),Seq(Call(SVar("apply-test"),[Build(Str("fileno on stderr -- 2")),Call(SVar("fileno"),[]),Build(Op("stderr",[])),Call(SVar("STDERR_FILENO"),[])]),Seq(Where(AM(Call(SVar("new-temp-file"),[]),Op("",[Var("tmp-name"),Var("tmp-fd")]))),Seq(Call(SVar("apply-test"),[Build(Str("fileno on temp file")),Seq(BA(Call(SVar("fdopen"),[]),Op("",[Var("tmp-fd"),Str("w")])),Seq(Match(Var("stream")),Seq(BA(Call(SVar("fileno"),[]),Var("stream")),Where(BA(Call(SVar("fclose"),[]),Var("stream")))))),Build(Var("tmp-fd"))]),Where(BA(Call(SVar("remove-file"),[]),Var("tmp-name"))))))))))))])])

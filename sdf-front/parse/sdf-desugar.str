module sdf-desugar
imports Sdf2-Syntax options simple-traversal

/**
 * sdf-desugar implements the following desugarings:
 *
 *   - remove double quotes in String literals: cons, lit
 *   - replace no-attrs by attrs([])
 *
 * Author:
 *   Martin Bravenboer
 */
strategies

  main-sdf-desugar =
    io-wrap(
      topdown(repeat(Desugar); try(DesugarOnce))
    )

  Desugar :
    no-attrs() -> attrs([])

rules
 
  DesugarOnce =
    cons(un-double-quote)

  DesugarOnce =
    lit(un-double-quote)
AC_INIT([srts],[0.11pre],[stratego-bugs@cs.uu.nl])
AM_INIT_AUTOMAKE

AM_CONFIG_HEADER(config.h)

ACLOCAL="${ACLOCAL} -I ."

AC_ARG_WITH(aterm, 
  AC_HELP_STRING([--with-aterm],[Specify location of aterm library, default: \$prefix]), 
  ATERM=$withval, 
  ATERM="$prefix"
)
AC_SUBST(ATERM)

AC_ARG_WITH(strc, 
  AC_HELP_STRING([--with-strc],[Specify location of Stratego compiler (bootstrapping only), default: \$prefix]), 
  STRC=$withval, 
  STRC="$prefix"
)
AC_SUBST(STRC)

AC_ARG_WITH(ssl, 
  AC_HELP_STRING([--with-ssl],[Specify location of ssl library (bootstrapping only), default: \$prefix]),
  SSL=$withval, 
  SSL="$prefix"
)
AC_SUBST(SSL)

AC_CHECK_FUNCS([getpagesize])
AC_CHECK_HEADERS([stdlib.h])
AC_CHECK_HEADERS([string.h])
AC_CHECK_HEADERS([unistd.h])

AC_C_INLINE
AC_HEADER_STDC
AC_TYPE_SIZE_T

AC_PROG_LIBTOOL
AC_PROG_CC
AC_PROG_INSTALL

TOP_SRCDIR=`pwd`
AC_SUBST(TOP_SRCDIR)

CHECK_FOR_MPROTECT

AC_SUBST(CC)
AC_SUBST(RELEASE)

AC_CONFIG_FILES([
  Makefile
  src/Makefile
  src/srts/Makefile
  ssl/Makefile
  libraries/Makefile
])
AC_OUTPUT

2004-07-11  Martin Bravenboer <martin@cs.uu.nl>

	* src/Makefile.am, ssl/Makefile.am, libraries/Makefile.am: at
	Cygwin no shared lirbaries were created until now. This is related
	to the problem of undefined symbols. Microsoft Windows does not
	allow undefined symbols in executables, but, if I understand it
	all correctly, undefined symbols in a library is not a problem
	since all required libraries will be available at link
	time. Libtool takes a flag to ensure this: -no-undefined. Going to
	test this at Cygwin after this commit ...

2004-07-08  Martin Bravenboer <martin@cs.uu.nl>

	* src/stratego.c: transformed counter should be volatile. GCC
	performs some optimizations that executes the transformed++
	*before* the invocation of the strategy f. Apparantly, GCC assumes
	that all the statements in this branch will always be executed,
	which is not the case if f fails. This problem showed up at a Mac
	OS X machine with the GCC of Apple from CVS.

	Thanks a *lot* to Eelco Dolstra for locating this problem. In
	contrast to me, he is not afraid of gdb, disassemble and PowerPC
	assembly ;) .

2004-06-30  Martin Bravenboer <martin@cs.uu.nl>

	* src/srts/stratego-config.h: generated. Don't think this file
	needs to be in the repository.

	* ssl/dir.c: implemented a quick, dirty, and insecure fallback for
	a missing mkdtemp. Implementation is based on a mktemp followed by
	a mkdir. This is a security risk, but I don't like to copying the
	huge implementations that other packages are using as a
	fallback. Note that the poor implementation is only used if
	mkdtemp is not available.
	
2004-06-26  Martin Bravenboer <martin@cs.uu.nl>

	Many changes to enable separate compilation of XTC tools.

	* First of all, the XTC repository is now returned by a *function*
	in init-stratego-application.h. Depending whether the
	XTC_REPOSITORY is defined or not, the strategy fails or returns
	the ATerm defined in XTC_REPOSITORY. This change was necessary to
	compile the XTC library without knowing the actual repository that
	will be used.
	
	This has two consequences: (1) every Stratego application now has
	a strategy to get the default XTC repository. (2) XTC tools are no
	longer required to have a default internal XTC repository: the
	other options (-r and environment variable) can also be used.

	* liblib now includes a compiled XTC library. If you import
	liblib, then you'll get the SSL and XTC.

	* Some XTC tools have been converted to separate compilation.

	* All bootstrapped sources have been updated.

2004-06-25  Martin Bravenboer <martin@cs.uu.nl>

	* srts/Makefile.am: build the choice point implementation in a
	separate library stratego-choice. Choice point implementations
	must implements the functions in srts/stratego-choice.h. The
	implementation of choice points is now completely separated from
	the runtime itself. Therefore it is now possible to plugin a
	difference choice point implementation without recompiling the
	entire runtime. The choice for a specific choice implementation is
	delayed until link time.

	Using the ++ with a choice point implementation that does not
	support the global choice (the standard implementation does not)
	will result in link error. The same holds for the bagof operator.

	* configure.in: removed configuration stuff for cpl-stratego.

2004-06-14  Martin Bravenboer <martin@cs.uu.nl>

	* ssl/string.c: added missing list check in the implode-string
	function. The missing check resulted in a SEGV if the current term
	is no list (STR-117).
	
2004-05-30  Arthur van Dam <adam@cs.uu.nl>

	* ssl/string.c : newname - generate new unique strings with
	user-definable prefix, and numbering within user-definable
	countergroups.
	ATerm SSL_newname(ATerm prefix, ATerm groupname)

2004-05-12  Martin Bravenboer <martin@cs.uu.nl>

	* use const (inspired by the mkstemp bug)
	
	- AT_getString now returns a const char*
	
	- updated all use of AT_getString to const char*
	
	- added const qualifiers to all aterm extensions (aterm 2.1 is
	recommended, since aterm 2.0.5 doesn't use the const qualifier)
	
	* io.c: added newline to end of file
	
	* exec.c: expressed execvp using execv_args.

	* aterm-extension.c: include string.h (strcmp)
	
2004-05-11  Martin Bravenboer <martin@cs.uu.nl>

	* ssl/exec.c: fixed a major bug in mkstemp: mkstemp wrote the
	result to an aterm symbol!

2004-03-22  Martin Bravenboer <martin@cs.uu.nl>

	* Added hashtable primitives that operate on an Hashtable
	representation in een ATerm. These primitives require you to pass
	this representation around in Stratego. The internal structure of
	this representation should not be used in any way and is subject
	to change (compare to Stream as ATerm).

	- SSL_hashtable_create(ATerm initial_size_term, ATerm
	max_load_term);
	- SSL_hashtable_destroy(ATerm table_term);
	- SSL_hashtable_put(ATerm table_term, ATerm key, ATerm value);
	- SSL_hashtable_get(ATerm table_term, ATerm key);
        - SSL_hashtable_remove(ATerm table_term, ATerm key);
        - SSL_hashtable_keys(ATerm table_term);
	
2004-02-22   Merijn de Jonge  <mdejonge@cs.uu.nl>

	* Makefile.am: added autoxt.m4 to EXTRA_DIST

	* Makefile.am: added line: ACLOCAL_AMFLAGS = -I . such that
	autoreconf can find autoxt.m4

2004-02-12  Martin Bravenboer <martin@cs.uu.nl>

	* ssl/exec.[ch]: added SSL_write_term_to_string, which writes an
	ATerm to a String.

2004-02-12  Martin Bravenboer <martin@cs.uu.nl>

	* ssl/exec.[ch]: added SSL_read_term_from_string, which reads an
	ATerm from a String. Useful in general, but especially for parsing
	command line ATerm arguments.

2003-12-24  Martin Bravenboer <martin@cs.uu.nl>
	
	* ssl/dir.[ch]: added chdir

2003-12-19  Eelco Visser  <visser@cs.uu.nl>

	* init-stratego-application.h, init-stratego-module.h: implement
	initialization of symbol and cached terms. A linked list of
	functions is constructed at load-time with a call to
	SRTS_stratego_initialize_module for each 'module'. A module here
	is a unit of compilation, for instance, a complete Stratego
	application or a closure of a module rendered as a library.
	(After an idea of Eelco Dolstra.)

2003-12-09  Martin Bravenboer <martin@cs.uu.nl>
	
	* ssl/dir.[ch]: added getcwd. Pathname allocation is tricky
	(that's probably why this function still wasn't in the SSL). Using
	the path_alloc function from Advanced Programming in the Unix
	Environment book.
	
2003-12-04  Martin Bravenboer <martin@cs.uu.nl>
	
	* ssl/exec.[ch]: added ANSI C/POSIX strerror and perror to improve error
	reporting in the SSL.
	
2003-11-10  Eelco Visser  <visser@cs.uu.nl>

	* src/stratego.c (_all, _one): Changed one-step traversal
	functions such that a new term is only built if there was an
	actual change to at least one of the sub-terms, thus avoiding
	unnecessary term construction. Idea: Eelco Dolstra.
	
2003-09-17  Martin Bravenboer <mbravenb@cs.uu.nl>

  * ssl/exec.[ch]: added:
    - ATerm SSL_get_errno(void);
    - ATerm SSL_set_errno(ATerm code);
    - ATerm SSL_EXDEV(void);

2003-09-16  Martin Bravenboer <mbravenb@cs.uu.nl>

  * ssl/number.[ch]: added SSL_rand, SSL_RAND_MAX, and
    SSL_srand to generate random numbers.

2003-07-14  Eelco Visser  <visser@cs.uu.nl>

	* src/srts/stratego.h: SSL_all, SSL_one, etc. are macros for
	the _all, _one, etc. functions reversing the term and strategy
	argument to conform with the new calling convention in which
	the subject term is the last argument of a function.

2003-05-12  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/term.c: Removed debug statements in address_lt.
    Maybe address-lt should even be defined in Stratego 
    itself (using SSL_address and lt).

2003-03-25  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: added fputc.

2003-03-25  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: added access.

2003-03-24  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: added fgetc.

2003-03-24  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: split write_to_stream 
    in baf/taf/text.

2003-03-24  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: new stream representation in blob.

  * ssl/exec.[ch]: new primitives: fopen, stdin_stream,
    stdout_stream, stderr_stream, write_term_to_stream,
    read_term_from_stream, fputs, puts, strlen, strcat,
    concat_strings

  * ssl/io.[ch]: moved fileno and fflush to exec.[ch]

2003-03-21  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/io.c: added stream_from_term
  * ssl/io.[ch]: added SSL_fileno

2003-03-21  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.h: added SSL_P_tmpdir
  * ssl/exec.[ch]: added SSL_mkstemp for creating
    temporary files

2003-03-20  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/exec.[ch]: added SSL_kill
  * ssl/exec.[h]:  let fork fail on fork failure

2003-02-26  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/cgi.[ch]: removed, cgi is part of stratego-net
  * ssl/connect.[ch]: removed, connect code should be
    improved and will be part of stratego-net.

2003-01-28  Martin Bravenboer <martin@mbravenboer.org>

  * ssl/io.[ch]: SSL_fflush

2003-01-18  Eelco Visser  <visser@cs.uu.nl>

	* ssl/dir.h (SSL_fdcopy): prototype

2003-01-12  Eelco Visser  <visser@cs.uu.nl>

	* ssl/ssl-time.h : SSL_epoch2utc -> SSL_epoch2UTC

2003-01-08  Eelco Visser  <visser@cs.uu.nl>

	* ssl/Makefile.am (includedir): Installing ssl header files in
	include/srts instead of include/ssl to avoid conflict with
	OpenSSL.

2002-12-31  Eelco Visser  <visser@cs.uu.nl>

	* ssl/exec.c: Added SSL_creat and SSL_open to open files,
	returning a file descriptor.

2002-12-16  Eelco Visser  <visser@cs.uu.nl>

	* ssl/dir.c: File to file copy without looking at contents (SSL_copy)

2002-12-07  Eelco Visser  <visser@cs.uu.nl>

	* src/dir.[ch]: rename, remove, and linking of file primitives

2002-12-01  Eelco Visser  <visser@cs.uu.nl>

	* src/srts/Makefile.am (stratego-config.h): Prevent reinclusion of
	header file stratego-config.h

2002-11-24  Eelco Visser  <visser@acm.org>

	* Makefile.srts.in: instructions for compiling and linking C files
	generated by the Stratego compiler

2002-11-19  Eelco Visser  <visser@acm.org>

	* ssl/ : Added C implementations of Stratego primitives to the
	run-time system. This simplifies bootstrapping, and allows the
	Stratego part of the ssl package to be built later on in the build
	process.

	* src/ : Improved conditional use of the CPL library.

	* src/srts/ : Header files in subdirectory with package name, for
	compatibility with installation situation. Renamed some header
	files.

	* src/Makefile.am: Derive implementation of choice in CPL from
	libchoice and add it to libstratego. This way the rest of the
	Stratego compiler does not need to be aware of the need for the
	CPL library

2002-03-31  Eelco Visser  <visser@acm.org>

	* src/Makefile.am: Conditional configuration did not work very well.
	Make sure to generate choice.h before compiling stratego.c

2002-03-14  Eelco Visser  <visser@acm.org>

	* Release 0.7 (fix2)

2002-03-10  Eelco Visser  <visser@acm.org>

	* Release 0.7

2002-03-08  Eelco Visser  <visser@acm.org>

	* Release 0.7beta3

	* src/stratego.c: Only add annotations after traversing a term
	when the original term had annotations; ATsetAnnotations is only
	defined if the annotations argument is a proper term.

2002-03-07  Eelco Visser  <visser@acm.org>

	* src/aterm-extension.c (ATmap): Explicitly order evaluation of
	arguments to ensure that application to head element is done
	before tail of the list. Apparently argument evaluation is
	compiler/platform dependent in C.

2002-02-12  Eelco Visser  <visser@acm.org>

	* src/stratego.c: Extended the traversal operators to preserve
	annotations.

2002-01-26  Eelco Visser  <visser@acm.org>

	* src/stratego.c (_bagof): Replaced call to fail() by call to
	_fail(t), which is the srts interface function for failure.

2002-01-25  Eelco Visser  <visser@acm.org>

	* src/Makefile.am (libstratego_a_SOURCES): Declared
	stratego-choice.h as a built source to force building it.

2002-01-15  Eelco Visser  <visser@acm.org>

	* src/: Adapted the Stratego Run-Time System to (conditionally)
	include the Nancy Choice Point Library. This provides an
	alternative implementation for choice from the current
	one---although it comes down to the same thing, i.e., setjmp and
	longjmp. The advantage of this addition is that it enables global
	choice. For programs only using local choice this extension is
	transparent. By choosing the --with-cpl switch of srts/configure
	the choice point library will be used. By default the old
	implementation is used. For programs using the new ++ and <++
	operators the --with-cpl flag should be used.

2002-01-10  Eelco Visser  <visser@acm.org>

	* Release 0.7beta

2002-01-06  Eelco Visser  <visser@acm.org>

	* src/stratego.c: Special handling of lists in generic traversal
	operators required by support for native ATerm lists.

	* src/aterm-extension.c (AThasName): Commented out functions
	converting to and from cons/nil lists

2002-01-04  Eelco Visser  <visser@acm.org>

	* src/aterm-extension.c: Commented out functions converting to and
	from tcons/tnil tuples

2002-01-03  Eelco Visser  <visser@acm.org>

	* Release 0.6.4
	
2001-11-26  Eelco Visser  <visser@acm.org>

	* Release 0.6.3

2001-11-15  Merijn de Jonge <mdejonge@cwi.nl>
	
	* Updated dependencies in srts-0.6.3.pkg

2001-10-06  Eelco Visser  <visser@acm.org>

	*  Release 0.6.2

2001-10-05  Eelco Visser  <visser@acm.org>

	* src/aterm-extension.c (ATmakeStringQ): Repair by Merijn de Jonge

2001-09-22  Eelco Visser  <visser@acm.org>

	* Release 0.6.1

2001-08-28  Eelco Visser  <visser@acm.org>

	* src/mprotect.[ch] (set_segv_handler): The solution of Merijn to
	mprotect the entire stack once at the start of execution did not
	completely work, maybe because only the parts of the stack that
	are already allocated are protected. Eelco Dolstra added a mechanism
	for trapping segmentation faults and mprotecting the stack at that
	point. This works!

2001-08-27  Eelco Visser  <visser@acm.org>

	* src/stratego.c: Save variables before PushChoice and restore
	them after failure.

2001-08-22  Eelco Visser  <visser@acm.org>

	* Run-time system for Stratego 0.6

2001-09-17  Eelco Visser  <visser@acm.org>

	* Stratego Run-time System separated from compiler to enable
	stand-alone distributions

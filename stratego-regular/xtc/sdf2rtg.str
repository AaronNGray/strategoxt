module sdf2rtg
imports xtc-lib options regular-xtc-tools tool-doc sdf-options sdf-xtc-tools

strategies

  main-sdf2rtg =
    xtc-io-wrap(sdf-main-module-option + system-about-switch,
      xtc-transform(!"sdf2table", !["-n", "-m", <get-sdf-main-module> | <pass-v-verbose>])
    ; xtc-transform(!"implodePT")
    ; xtc-transform(!"sdf-desugar", pass-verbose)
    ; xtc-transform(!"core-sdf-grammar2rtg", pass-verbose)
    ; xtc-pp-rtg
    )

//   xtc-parse-sdf2-definition
// ; xtc-transform(!"core-sdf-normalize", <conc> (<pass-verbose> (), <pass-sdf-main-module> ()))



strategies

  override-system-usage =
    <tool-doc> sdf2rtg-tool-doc

  override-system-about = 
    <tool-doc> sdf2rtg-tool-about

overlays

  sdf2rtg-tool-doc =
    [ Usage("sdf2rtg [OPTIONS]")
    , Summary(
       "Generates an abstract syntax definition in the rtg language
        from a SDF concrete syntax definition.")
    , OptionUsage()
    , Description([
       "This is a test program to demonstrate use of 
        parse-options and  generation of usage
        info from option and switch specificatios.
        These now contain usage info as additional
        third argument."
      ,"This is a test program to demonstrate use of 
        parse-options and  generation of usage
        info from option and switch specificatios.
        These now contain usage info as additional
        third argument."
        ])
    , AutoReportBugs()
    ]

  sdf2rtg-tool-about =
    [ AutoProgram()
    , Author(Person("Martin Bravenboer", "martin@cs.uu.nl"))
    , GNU_LGPL("2002-2004", "Martin Bravenboer <martin@cs.uu.nl>")
    , Config([
        DefaultXTCRepository()
      , CurrentXTCRepository()
      , UsingCPL()
      ]) 
    ]

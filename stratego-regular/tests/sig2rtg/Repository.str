/** 
 * XTC Repository signature
 */
module Repository

imports list-cons

signature
  constructors
  
  // Repository structure
  
  XtcRepository : List(Registration) -> Repository

  // Tool and resource registrations
  
  XtcReg        : EntryId * List(Entry) -> Registration
                : Location * List(Property) -> Entry
                : String -> Location           
                : String -> EntryId

  // Repository references
  
  XtcRef        : List(Entry) -> Reference

  // Entry reference (alias)

  EntryRef      : EntryId * Properties -> EntryRef
  EntryRef      : Properties -> EntryRef
  EntryRef      : EntryId -> EntryRef

  // Common properties
  
  Version       : String -> Property
  Imported      : Property
  Comment       : String -> Property
  Package       : String -> Property
  Type          : String -> Property
  
  // Contracts (Property)

  Contracts     : Contract * Contract -> Property
                : List(EntryRef) -> Contract

  // Run descriptors

  Desc          : Model -> Property
  
  XT            : Arguments -> Model 
  Exec          : Argument * Argument * Arguments -> Model 
  XTService     : Arguments -> Model
  HttpService   : Argument * Arguments -> Model 
  Nix           : Model
  
  // Resource associations

  Assoc         : EntryRef * Argument * Arguments -> Property 
                
  // Arguments 
  
  Args          : List(Argument) -> Arguments
  Arg           : String -> Argument
  StdIn         : Argument
  StdOut        : Argument
  Key           : String * String -> Argument
  KeyVal        : String -> Argument

  // XTC Table (for storing repository at runtime) 

  XTC           : Table

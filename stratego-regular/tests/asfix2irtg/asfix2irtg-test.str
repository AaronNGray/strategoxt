/**
 * @author  Martin Bravenboer <martin@cs.uu.nl>
 */
module asfix2irtg-test
imports sunit xtc-lib xtc-debug irtg

strategies 

  main-asfix2irtg-test =
   test-suite(!"AsFix to IRTG",
     intconst-tests
   )

  intconst-tests =
    exp-test(|"1", 
      Prod(
        Nonterm("Exp")
      , Appl(
          Term("Int")
        , [Prod(Nonterm("IntConst"),String("1"))]
        )
      )
    )

strategies

  exp-test(|input, output) =
      apply-test(!<conc-strings> ("AsFix2   of ", input), exp-asfix2-test,   !input, !output)
    ; apply-test(!<conc-strings> ("AsFix2ME of ", input), exp-asfix2me-test, !input, !output)

strategies

  exp-asfix2-test = 
    exp-test(|["-2"])

  exp-asfix2me-test =
    exp-test(|[])

  exp-test(|sglr-args) =
    xtc-temp-files(
      <print-to> [<id>]
    ; xtc-transform(!"sglr", !["-p", "Exp.tbl" | sglr-args])
    ; xtc-transform(!"asfix2irtg", pass-verbose)
    ; read-from
    )

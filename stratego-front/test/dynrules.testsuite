testsuite Stratego Dynamic Rules
topsort Strategy

test Oldskool scope
  "{| A : s |}" succeeds

test Oldskool scope
  "{| A, B : s |}" succeeds

test Labeled scope
  "{| A.f : s |}" succeeds

test Labeled scope
  "{| A.g, A.f : s |}" succeeds

test Scope with string literal
  [  {| A."f" : s |}  ] succeeds

test Labeled scope with constructors
  "{| A.foo() : s |}" succeeds

test Labeled scope with inline term application
  "{| A.<s> t : s |}" succeeds

test Add a label to a scope
  "{| A :+ f |}" succeeds

test Branch the dynamic rules of the current scope
  "branch( A : s )" succeeds

test Union of two branches
  " union(branch(A : s1 ), branch(A : s2 ))" succeeds

test Generate a dynamic rule
  "rules( A : p -> p )" succeeds

test Generate a dynamic rule in the scope of some label
  "rules( A.f : p -> p )" succeeds

test Generate a dynamic rule in the scope of some label
  "rules( A(s).f : p -> p )" succeeds

test Generate a dynamic rule in the scope of some label
  "rules( A(s|t).f : p -> p )" succeeds

test Extend the set of dynamic rules
  "rules( A :+ p -> p )" succeeds

test Undefine dynamic rules
  "rules( A :- p )" succeeds


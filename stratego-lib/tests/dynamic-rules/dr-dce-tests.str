module dr-dce-tests
imports
  dr-test-utils

/**
 * This test suite uses dead code elimination for TIL programs
 * as a real-life test of the dynamic rules library.
 */

strategies

  dead-code-elimination-tests =
    test-suite(!"Dynamic Rules Library -- Dead Code Elimination",
      where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Union Tests"))
//    ; where(description-message(|"  notation in test names: rule before applying intersection"))
//    ; where(description-message(|"                          < rule in left branch"))
//    ; where(description-message(|"                          + rule in right branch"))
//    ; where(description-message(|"  (x,val) means rule with key x, and val decodes like this:"))
//    ; where(description-message(|"    - same letter means redefinition with the same value"))
//    ; where(description-message(|"    - different letter means redefinition with a different value"))
//    ; where(description-message(|"    - \"undef\" means undefinition of rule"))
//    ; where(description-message(|"    - \"none\" means no change to rule"))
//    ; where(description-message(|"    - \"empty\" means no rule is defined at that point"))
    ; dce-union-tests
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Fix and Union Tests"))
//    ; where(description-message(|"  notation in test names: rule before applying intersection"))
//    ; where(description-message(|"                          ; [rule in iteration]*"))
//    ; where(description-message(|"  (x,val) decodes as before"))
    ; dce-fix-and-union-tests
/*
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Break Tests"))
    ; pc-break-tests
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Break to Label Tests"))
    ; pc-break-to-label-tests
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Continue Tests"))
    ; pc-continue-tests
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Continue to Label Tests"))
    ; pc-continue-to-label-tests
    ; where(separation-message(|"Dynamic Rules Library -- Dead Code Elimination -- Exception Tests"))
    ; pc-exception-tests
*/
    )

strategies

  dce-union-tests = id

  dce-fix-and-union-tests = id

module dynamic-rules-utils
imports liblib
strategies

  /**
   * Enter scope for a set of dynamic rules, locally undefining dynamic
   * rules depending on the new local entitity.
   */

  new-dynamic-rules(|Rs, scope, dep) = 
    where(<map({r: ?r; call(<conc-strings>("new-", r)||scope, dep)})> Rs)

  /**
   * Kill all dynamic rules dependent on the subject term.
   */

  undefine-dynamic-rules(|Rs, dep) = 
    where(<map({r: ?r; call(<conc-strings>("undefine-", r)||dep)})> Rs)

module dead-def-elim
imports Stratego stratlib lib pack-graph
strategies

  dead-def-elim-io = 
    iowrap(Specification([id,Strategies(dead-def-elim)]))

  dead-def-elim =
    !(["main_0_0"], <map(RegisterDefinition)>, [])
    ; graph-nodes-roots(Definition, svars, \ (_,x,d) -> [x|d] \ )

  RegisterDefinition =
    ?sdef@SDefT(f, xs, ys, s)
    ; rules(
        Definition : (f, _) -> sdef
      )


module needed-constructors
imports stratlib
strategies 

  needed-constructors :
    Specification([sig, Strategies(sdefs)]) ->
    Specification([sig', Strategies(sdefs)])
    where <topdown(try(DeclareConstructorNeeded))> sdefs
	; <Signature([Constructors(filter(ConstructorNeeded))])> sig => sig'

  DeclareConstructorNeeded =
    ?Op(c, _)
    ; rules(ConstructorNeeded : OpDecl(c, t) -> OpDecl(c, t))


/**
 * Define explicit variable scopes for \ ... \ rules.
 */

module define-lrules

imports libstratego-lib 
	Stratego-Sugar 
	stratego/strc/lib/stratlib

strategies

  define-lrules = 
    bottomup(try(DefLRule + DefScopeDefault))

  DefLRule : 
    |[ \ t1 -> t2 where s \ ]| ->
    |[ { ~<tvars; map(try(?ListVar(<id>)))> t1 : (t1 -> t2 where s) } ]|

  DefScopeDefault :
    |[ { s } ]| -> |[ { ~<tvars> s : s } ]|



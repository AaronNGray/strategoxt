module sdf-to-sig
imports xtc-lib lib
strategies

  sdf-to-sig = 
    parse-options(io-options); 
    (
       need-help(default-usage)
    <+ 
       xtc-temp-files(
	(!FILE(<get-config> "-i") <+ !stdin)

        ; xtc-transform(!"sglr",	  !["-2", "-p", <xtc-find> "sdf.cons.tbl"])
	; xtc-transform(!"implode-asfix")
	; xtc-transform(!"sdf2sig")
        ; xtc-transform(!"ast2abox",	  !["-p", <xtc-find> "Stratego-pretty.pp",
					    "-p", <xtc-find> "dummy.pp"])
        ; xtc-transform(!"abox2text")
	; <xtc-command(!"unpack")> [<?FILE(<id>)>, "str"]

        //; rename-to(<get-config> "-o" <+ !stdout)

        ; if-verbose1(
            <printnl>(stderr,
		[<get-config> "program", " (", <run-time>, " secs)"])
          )
      )
    <+ 
       report-failure
    )

